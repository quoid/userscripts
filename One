<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞—Ç–∞–ª–æ–≥ –¢–æ–≤–∞—Ä—ñ–≤</title>
    <style>
        /* Global styles */
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f7f6;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        h1, h2 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 25px;
        }

        /* Controls section */
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            background-color: #ecf0f1;
            border-radius: 10px;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.05);
            align-items: center;
            justify-content: center;
        }

        .control-group {
            flex: 1;
            min-width: 200px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .control-group label {
            font-weight: bold;
            color: #555;
            margin-bottom: 5px;
        }

        .control-group input[type="text"],
        .control-group select {
            padding: 10px 15px;
            border: 1px solid #bdc3c7;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            width: 100%;
            box-sizing: border-box;
        }

        .control-group input[type="text"]:focus,
        .control-group select:focus {
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
            outline: none;
        }

        .category-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .category-filters label {
            background-color: #3498db;
            color: #fff;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
            position: relative;
            overflow: hidden;
        }

        .category-filters label:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }

        .category-filters input[type="checkbox"] {
            display: none;
        }

        .category-filters input[type="checkbox"]:checked + span {
            background-color: #27ae60;
            box-shadow: 0 0 0 3px rgba(39, 174, 96, 0.4);
        }
        
        .category-filters label span {
            padding: 0;
            margin: 0;
        }

        .reset-button {
            background-color: #e74c3c;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s ease, transform 0.2s ease;
            align-self: flex-end;
        }

        .reset-button:hover {
            background-color: #c0392b;
            transform: translateY(-2px);
        }

        /* Product grid */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            padding: 20px 0;
        }

        /* Product card animation */
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .product-card {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.07);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            animation: fadeInScale 0.5s ease-out forwards;
            cursor: pointer; /* Make the whole card clickable for details */
        }

        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        }

        .product-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-bottom: 1px solid #eee;
        }

        .product-card-content {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .product-card h3 {
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 1.3rem;
            color: #2c3e50;
        }

        .product-card p {
            margin-bottom: 8px;
            color: #666;
            font-size: 0.95rem;
        }

        .product-card .price {
            font-size: 1.4rem;
            font-weight: bold;
            color: #27ae60;
            margin-top: auto;
            margin-bottom: 15px;
        }

        .product-card .tags {
            font-size: 0.85rem;
            color: #888;
            margin-top: 5px;
            margin-bottom: 10px;
        }

        .add-to-cart-button {
            background-color: #2ecc71;
            color: #fff;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: background-color 0.3s ease, transform 0.2s ease;
            width: 100%;
            margin-top: 10px; /* Space from other content */
        }

        .add-to-cart-button:hover {
            background-color: #27ae60;
            transform: translateY(-2px);
        }

        .add-to-cart-button:active {
            transform: translateY(0);
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        /* Style for button when item is in cart */
        .add-to-cart-button.added {
            background-color: #95a5a6;
            cursor: not-allowed;
            pointer-events: none;
            opacity: 0.8;
        }

        /* No results message */
        .no-results {
            text-align: center;
            font-size: 1.2rem;
            color: #888;
            padding: 50px;
            display: none;
        }

        /* Cart button */
        .cart-button-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
        }

        .cart-button {
            background-color: #f39c12;
            color: #fff;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s ease, transform 0.2s ease;
            position: relative;
        }

        .cart-button:hover {
            background-color: #e67e22;
            transform: scale(1.05);
        }

        .cart-button:active {
            transform: scale(1);
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #e74c3c;
            color: #fff;
            font-size: 0.8rem;
            font-weight: bold;
            border-radius: 50%;
            padding: 5px 8px;
            min-width: 20px;
            text-align: center;
            line-height: 1;
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.6);
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal.show {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
            width: 90%;
            max-width: 600px;
            position: relative;
            transform: translateY(-20px);
            transition: transform 0.3s ease;
            max-height: 90vh; /* Limit height for scrollable content */
            overflow-y: auto; /* Enable scroll if content overflows */
        }

        .modal.show .modal-content {
            transform: translateY(0);
        }

        .close-button {
            color: #aaa;
            position: absolute;
            top: 15px;
            right: 25px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close-button:hover,
        .close-button:focus {
            color: #333;
            text-decoration: none;
        }

        /* Cart specific styles */
        .cart-items-list {
            list-style: none;
            padding: 0;
            margin: 20px 0;
            max-height: 300px;
            overflow-y: auto;
            border-top: 1px solid #eee;
            border-bottom: 1px solid #eee;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px dashed #eee;
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-item-info {
            flex-grow: 1;
        }

        .cart-item-info h4 {
            margin: 0 0 5px 0;
            font-size: 1.1rem;
            color: #333;
        }

        .cart-item-info p {
            margin: 0;
            color: #777;
            font-size: 0.9rem;
        }

        .remove-item-button {
            background-color: #e74c3c;
            color: #fff;
            border: none;
            border-radius: 5px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: background-color 0.3s ease;
        }

        .remove-item-button:hover {
            background-color: #c0392b;
        }

        .cart-summary {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            text-align: right;
            font-size: 1.2rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .checkout-button {
            background-color: #3498db;
            color: #fff;
            padding: 15px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: bold;
            transition: background-color 0.3s ease, transform 0.2s ease;
            width: 100%;
            margin-top: 20px;
        }

        .checkout-button:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }

        .checkout-button:active {
            transform: translateY(0);
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        /* Product Details Modal specific styles */
        #product-details-modal .modal-content {
            max-width: 700px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        #product-details-modal img {
            max-width: 100%;
            height: auto;
            max-height: 300px;
            object-fit: contain;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        #product-details-modal h2 {
            text-align: left;
            margin-bottom: 10px;
        }

        #product-details-modal .detail-section {
            background-color: #f8f8f8;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #eee;
        }

        #product-details-modal .detail-section h3 {
            margin-top: 0;
            color: #34495e;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        #product-details-modal .detail-section ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        #product-details-modal .detail-section ul li {
            margin-bottom: 5px;
            color: #555;
            font-size: 0.95rem;
        }
        #product-details-modal .detail-section p {
            color: #555;
            font-size: 0.95rem;
            margin-bottom: 5px;
        }

        #product-details-modal .modal-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            justify-content: flex-end;
        }

        #product-details-modal .modal-buttons .add-to-cart-button,
        #product-details-modal .modal-buttons .edit-product-button {
            width: auto;
            padding: 10px 20px;
            font-size: 0.95rem;
            margin-top: 0;
            align-self: flex-end;
        }
        #product-details-modal .modal-buttons .edit-product-button {
            background-color: #8e44ad;
        }
        #product-details-modal .modal-buttons .edit-product-button:hover {
            background-color: #9b59b6;
        }

        /* Edit Product Modal specific styles */
        #edit-product-modal .modal-content {
            max-width: 500px;
        }
        #edit-product-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }
        #edit-product-form label {
            font-weight: bold;
            color: #555;
        }
        #edit-product-form input[type="text"],
        #edit-product-form textarea,
        #edit-product-form input[type="number"] {
            padding: 10px 15px;
            border: 1px solid #bdc3c7;
            border-radius: 8px;
            font-size: 1rem;
            width: 100%;
            box-sizing: border-box;
        }
        #edit-product-form textarea {
            min-height: 80px;
            resize: vertical;
        }
        #edit-product-form button {
            background-color: #28a745;
            color: #fff;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: background-color 0.3s ease;
            margin-top: 10px;
        }
        #edit-product-form button:hover {
            background-color: #218838;
        }

        /* Message box */
        .message-box {
            position: fixed;
            bottom: 90px;
            right: 30px;
            background-color: #333;
            color: #fff;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            z-index: 1002;
        }

        .message-box.show {
            opacity: 1;
            visibility: visible;
        }

        /* Loading indicator (kept for general heavy operations, though not used for AI image gen anymore) */
        .loading-indicator {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: #fff;
            padding: 20px 30px;
            border-radius: 10px;
            z-index: 1003;
            font-size: 1.2rem;
            text-align: center;
        }
        .loading-indicator.show {
            display: block;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                align-items: stretch;
            }

            .control-group {
                min-width: unset;
                width: 100%;
            }

            .reset-button {
                align-self: stretch;
            }

            .product-grid {
                grid-template-columns: 1fr;
            }

            .modal-content {
                width: 95%;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>–ö–∞—Ç–∞–ª–æ–≥ –¢–æ–≤–∞—Ä—ñ–≤</h1>

        <div class="controls">
            <div class="control-group">
                <label for="search-input">–ü–æ—à—É–∫:</label>
                <input type="text" id="search-input" placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É —Ç–æ–≤–∞—Ä—É...">
            </div>

            <div class="control-group">
                <label>–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó:</label>
                <div class="category-filters" id="category-filters">
                    <!-- Categories will be dynamically inserted here -->
                </div>
            </div>

            <div class="control-group">
                <label for="sort-select">–°–æ—Ä—Ç—É–≤–∞—Ç–∏ –∑–∞:</label>
                <select id="sort-select">
                    <option value="default">–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º</option>
                    <option value="price-asc">–¶—ñ–Ω–∞ (–≤—ñ–¥ –Ω–∏–∑—å–∫–æ—ó –¥–æ –≤–∏—Å–æ–∫–æ—ó)</option>
                    <option value="price-desc">–¶—ñ–Ω–∞ (–≤—ñ–¥ –≤–∏—Å–æ–∫–æ—ó –¥–æ –Ω–∏–∑—å–∫–æ—ó)</option>
                    <option value="title-asc">–ù–∞–∑–≤–∞ (–ê-–Ø)</option>
                    <option value="title-desc">–ù–∞–∑–≤–∞ (–Ø-–ê)</option>
                </select>
            </div>

            <button class="reset-button" id="reset-filters-button">–°–∫–∏–Ω—É—Ç–∏ –≤—Å–µ</button>
        </div>

        <div class="product-grid" id="product-list">
            <!-- Product cards will be dynamically inserted here -->
        </div>

        <div class="no-results" id="no-results-message">
            –ù–µ–º–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å –≤–∞—à–∏–º –∫—Ä–∏—Ç–µ—Ä—ñ—è–º.
        </div>
    </div>

    <div class="cart-button-container">
        <button class="cart-button" id="open-cart-button">
            üõí <span class="cart-count" id="cart-item-count">0</span>
        </button>
    </div>

    <!-- Cart Modal -->
    <div id="cart-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="close-cart-button">&times;</span>
            <h2>–í–∞—à –∫–æ—à–∏–∫</h2>
            <ul id="cart-items-list" class="cart-items-list">
                <!-- Cart items will be dynamically inserted here -->
            </ul>
            <div class="cart-summary">
                –ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞: <span id="cart-total-price">0.00 ‚Ç¥</span>
            </div>
            <button class="checkout-button" id="checkout-button">–û—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
        </div>
    </div>

    <!-- Product Details Modal -->
    <div id="product-details-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="close-product-details-modal">&times;</span>
            <img id="details-product-image" src="" alt="Product Image">
            <h2 id="details-product-title"></h2>
            <p>–¶—ñ–Ω–∞: <span id="details-product-price"></span></p>
            <p>–ö–∞—Ç–µ–≥–æ—Ä—ñ—è: <span id="details-product-category"></span></p>
            <p>–¢–µ–≥–∏: <span id="details-product-tags"></span></p>
            
            <div class="detail-section">
                <h3>–û–ø–∏—Å:</h3>
                <p id="details-product-description"></p>
            </div>

            <div class="detail-section">
                <h3>–¢–µ—Ö–Ω—ñ—á–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:</h3>
                <ul id="details-product-tech-specs"></ul>
            </div>

            <div class="detail-section">
                <h3>–í—ñ–¥–≥—É–∫–∏:</h3>
                <ul id="details-product-reviews"></ul>
            </div>

            <div class="modal-buttons">
                <button class="add-to-cart-button" id="details-add-to-cart-button">–î–æ–¥–∞—Ç–∏ –≤ –∫–æ—à–∏–∫</button>
                <button class="edit-product-button" id="details-edit-product-button">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ —Ç–æ–≤–∞—Ä</button>
            </div>
        </div>
    </div>

    <!-- Edit Product Modal -->
    <div id="edit-product-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="close-edit-product-modal">&times;</span>
            <h2>–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ —Ç–æ–≤–∞—Ä</h2>
            <form id="edit-product-form">
                <input type="hidden" id="edit-product-id">
                <label for="edit-product-title">–ù–∞–∑–≤–∞:</label>
                <input type="text" id="edit-product-title" required>

                <label for="edit-product-category">–ö–∞—Ç–µ–≥–æ—Ä—ñ—è:</label>
                <input type="text" id="edit-product-category" required>

                <label for="edit-product-price">–¶—ñ–Ω–∞:</label>
                <input type="number" id="edit-product-price" required step="0.01">

                <label for="edit-product-image">URL –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è:</label>
                <input type="text" id="edit-product-image" required>

                <label for="edit-product-tags">–¢–µ–≥–∏ (—á–µ—Ä–µ–∑ –∫–æ–º—É):</label>
                <input type="text" id="edit-product-tags">

                <label for="edit-product-description">–û–ø–∏—Å:</label>
                <textarea id="edit-product-description" required></textarea>

                <label for="edit-product-tech-specs">–¢–µ—Ö–Ω—ñ—á–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (JSON):</label>
                <textarea id="edit-product-tech-specs" placeholder='{"–î–∏—Å–ø–ª–µ–π": "1.4 –¥—é–π–º–∞", "–ë–∞—Ç–∞—Ä–µ—è": "7 –¥–Ω—ñ–≤"}'></textarea>

                <label for="edit-product-reviews">–í—ñ–¥–≥—É–∫–∏ (–∫–æ–∂–µ–Ω –≤—ñ–¥–≥—É–∫ –∑ –Ω–æ–≤–æ–≥–æ —Ä—è–¥–∫–∞):</label>
                <textarea id="edit-product-reviews" placeholder='–í—ñ–¥–≥—É–∫ 1\n–í—ñ–¥–≥—É–∫ 2'></textarea>

                <button type="submit">–ó–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏</button>
            </form>
        </div>
    </div>

    <!-- Message Box -->
    <div id="message-box" class="message-box"></div>

    <!-- Loading Indicator -->
    <div id="loading-indicator" class="loading-indicator">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>

    <script>
        // IIFE for encapsulation
        (function() {
            // Product data with new fields for tech specs and reviews
            const productsData = [
                {
                    "id": 1,
                    "title": "–°–º–∞—Ä—Ç-–≥–æ–¥–∏–Ω–Ω–∏–∫ Pro",
                    "category": "–ì–æ–¥–∏–Ω–Ω–∏–∫–∏",
                    "price": 11990,
                    "image": "https://placehold.co/400x200/4CAF50/FFFFFF?text=Smartwatch+Pro",
                    "tags": ["gps", "premium", "titan"],
                    "description": "–¶–µ–π —Å–º–∞—Ä—Ç-–≥–æ–¥–∏–Ω–Ω–∏–∫ Pro –ø–æ—î–¥–Ω—É—î –µ–ª–µ–≥–∞–Ω—Ç–Ω–∏–π –¥–∏–∑–∞–π–Ω —Ç–∞ –ø–µ—Ä–µ–¥–æ–≤—ñ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó. –í—ñ–Ω –æ—Å–Ω–∞—â–µ–Ω–∏–π GPS, –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥–æ–º —Å–µ—Ä—Ü–µ–≤–æ–≥–æ —Ä–∏—Ç–º—É —Ç–∞ –≤–æ–¥–æ–Ω–µ–ø—Ä–æ–Ω–∏–∫–Ω–∏–º –∫–æ—Ä–ø—É—Å–æ–º –∑ —Ç–∏—Ç–∞–Ω—É, —ñ–¥–µ–∞–ª—å–Ω–æ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–ø–æ—Å–æ–±—É –∂–∏—Ç—Ç—è —Ç–∞ –ø–æ–≤—Å—è–∫–¥–µ–Ω–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.",
                    "techSpecs": {
                        "–î–∏—Å–ø–ª–µ–π": "AMOLED, 1.4 –¥—é–π–º–∞",
                        "–ë–∞—Ç–∞—Ä–µ—è": "–î–æ 7 –¥–Ω—ñ–≤",
                        "–í–æ–¥–æ–Ω–µ–ø—Ä–æ–Ω–∏–∫–Ω—ñ—Å—Ç—å": "5 ATM",
                        "–ú–∞—Ç–µ—Ä—ñ–∞–ª": "–¢–∏—Ç–∞–Ω, —Å–∞–ø—Ñ—ñ—Ä–æ–≤–µ —Å–∫–ª–æ"
                    },
                    "reviews": [
                        "–î—É–∂–µ –∑–∞–¥–æ–≤–æ–ª–µ–Ω–∏–π –≥–æ–¥–∏–Ω–Ω–∏–∫–æ–º, –ø—Ä–∞—Ü—é—î —á—É–¥–æ–≤–æ!",
                        "–°—Ç–∏–ª—å–Ω–∏–π —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é."
                    ]
                },
                {
                    "id": 2,
                    "title": "–ë–µ–∑–¥—Ä–æ—Ç–æ–≤—ñ –Ω–∞–≤—É—à–Ω–∏–∫–∏ X2",
                    "category": "–ù–∞–≤—É—à–Ω–∏–∫–∏",
                    "price": 3499,
                    "image": "https://placehold.co/400x200/2196F3/FFFFFF?text=Headphones+X2",
                    "tags": ["bluetooth", "sport"],
                    "description": "–ë–µ–∑–¥—Ä–æ—Ç–æ–≤—ñ –Ω–∞–≤—É—à–Ω–∏–∫–∏ X2 –∑–∞–±–µ–∑–ø–µ—á—É—é—Ç—å –∫—Ä–∏—à—Ç–∞–ª–µ–≤–æ —á–∏—Å—Ç–∏–π –∑–≤—É–∫ —Ç–∞ –≥–ª–∏–±–æ–∫—ñ –±–∞—Å–∏. –õ–µ–≥–∫—ñ —Ç–∞ –∑—Ä—É—á–Ω—ñ, –≤–æ–Ω–∏ —ñ–¥–µ–∞–ª—å–Ω–æ –ø—ñ–¥—Ö–æ–¥—è—Ç—å –¥–ª—è –∑–∞–Ω—è—Ç—å —Å–ø–æ—Ä—Ç–æ–º —Ç–∞ —â–æ–¥–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞–Ω–Ω—è –º—É–∑–∏–∫–∏. –î–æ 20 –≥–æ–¥–∏–Ω –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ —Ç–∞ —à–≤–∏–¥–∫–∞ –∑–∞—Ä—è–¥–∫–∞.",
                    "techSpecs": {
                        "–¢–∏–ø –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è": "Bluetooth 5.0",
                        "–ß–∞—Å —Ä–æ–±–æ—Ç–∏": "20 –≥–æ–¥–∏–Ω",
                        "–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ": "–®—É–º–æ–∑–∞–≥–ª—É—à–µ–Ω–Ω—è, –≤–æ–ª–æ–≥–æ–∑–∞—Ö–∏—Å—Ç"
                    },
                    "reviews": [
                        "–ó–≤—É–∫ –ø—Ä–æ—Å—Ç–æ —Å—É–ø–µ—Ä, –∑—Ä—É—á–Ω–æ —Å–∏–¥—è—Ç—å!",
                        "–ë–∞—Ç–∞—Ä–µ—è —Ç—Ä–∏–º–∞—î –¥–æ–≤–≥–æ, –∑–∞–¥–æ–≤–æ–ª–µ–Ω–∏–π –ø–æ–∫—É–ø–∫–æ—é."
                    ]
                },
                {
                    "id": 3,
                    "title": "–Ü–≥—Ä–æ–≤–∏–π –Ω–æ—É—Ç–±—É–∫ Ultima",
                    "category": "–ù–æ—É—Ç–±—É–∫–∏",
                    "price": 45000,
                    "image": "https://placehold.co/400x200/FF9800/FFFFFF?text=Gaming+Laptop",
                    "tags": ["gaming", "performance"],
                    "description": "–Ü–≥—Ä–æ–≤–∏–π –Ω–æ—É—Ç–±—É–∫ Ultima - —Ü–µ –ø–æ—Ç—É–∂–Ω–∞ –º–∞—à–∏–Ω–∞ –¥–ª—è —Å–ø—Ä–∞–≤–∂–Ω—ñ—Ö –≥–µ–π–º–µ—Ä—ñ–≤. –û—Å–Ω–∞—â–µ–Ω–∏–π –Ω–æ–≤—ñ—Ç–Ω—ñ–º –ø—Ä–æ—Ü–µ—Å–æ—Ä–æ–º —Ç–∞ –≤—ñ–¥–µ–æ–∫–∞—Ä—Ç–æ—é, –≤—ñ–Ω –∑–∞–±–µ–∑–ø–µ—á—É—î –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–∞ –ø–ª–∞–≤–Ω—É –≥—Ä–∞—Ñ—ñ–∫—É —É –±—É–¥—å-—è–∫–∏—Ö —ñ–≥—Ä–∞—Ö. –Ø—Å–∫—Ä–∞–≤–∏–π –¥–∏—Å–ø–ª–µ–π —Ç–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –æ—Ö–æ–ª–æ–¥–∂–µ–Ω–Ω—è –≥–∞—Ä–∞–Ω—Ç—É—é—Ç—å –Ω–µ–∑–∞–±—É—Ç–Ω—ñ–π —ñ–≥—Ä–æ–≤–∏–π –¥–æ—Å–≤—ñ–¥.",
                    "techSpecs": {
                        "–ü—Ä–æ—Ü–µ—Å–æ—Ä": "Intel Core i9",
                        "–í—ñ–¥–µ–æ–∫–∞—Ä—Ç–∞": "NVIDIA GeForce RTX 4080",
                        "–û–ó–£": "32GB DDR5",
                        "–ù–∞–∫–æ–ø–∏—á—É–≤–∞—á": "1TB SSD"
                    },
                    "reviews": [
                        "–ü—Ä–æ—Å—Ç–æ –∑–≤—ñ—Ä! –í—Å—ñ —ñ–≥—Ä–∏ –ª—ñ—Ç–∞—é—Ç—å.",
                        "–¢—Ä–æ—Ö–∏ —à—É–º–Ω–∏–π –ø—ñ–¥ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º, –∞–ª–µ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–æ–≥–æ –≤–∞—Ä—Ç–∞."
                    ]
                },
                {
                    "id": 4,
                    "title": "–ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –∫–Ω–∏–≥–∞ ReaderGo",
                    "category": "–ï–ª–µ–∫—Ç—Ä–æ–Ω—ñ–∫–∞",
                    "price": 2800,
                    "image": "https://placehold.co/400x200/9C27B0/FFFFFF?text=E-Reader",
                    "tags": ["e-ink", "light"],
                    "description": "–ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –∫–Ω–∏–≥–∞ ReaderGo –∑ E-Ink –µ–∫—Ä–∞–Ω–æ–º –∑–∞–±–µ–∑–ø–µ—á—É—î –∫–æ–º—Ñ–æ—Ä—Ç–Ω–µ —á–∏—Ç–∞–Ω–Ω—è –±–µ–∑ –Ω–∞–ø—Ä—É–≥–∏ –¥–ª—è –æ—á–µ—á–µ–π. –õ–µ–≥–∫–∞ —Ç–∞ –∫–æ–º–ø–∞–∫—Ç–Ω–∞, –≤–æ–Ω–∞ —ñ–¥–µ–∞–ª—å–Ω–æ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –ø–æ–¥–æ—Ä–æ–∂–µ–π. –¢–∏—Å—è—á—ñ –∫–Ω–∏–≥ —É –≤–∞—à—ñ–π –∫–∏—à–µ–Ω—ñ –∑ —Ç—Ä–∏–≤–∞–ª–∏–º —á–∞—Å–æ–º —Ä–æ–±–æ—Ç–∏ –≤—ñ–¥ –±–∞—Ç–∞—Ä–µ—ó.",
                    "techSpecs": {
                        "–ï–∫—Ä–∞–Ω": "6 –¥—é–π–º—ñ–≤ E-Ink Carta",
                        "–ü—ñ–¥—Å–≤—ñ—á—É–≤–∞–Ω–Ω—è": "–†–µ–≥—É–ª—å–æ–≤–∞–Ω–µ",
                        "–ü–∞–º'—è—Ç—å": "8GB",
                        "–§–æ—Ä–º–∞—Ç–∏": "EPUB, PDF, FB2"
                    },
                    "reviews": [
                        "–û—á—ñ –Ω–µ –≤—Ç–æ–º–ª—é—é—Ç—å—Å—è, —á–∏—Ç–∞—é –≥–æ–¥–∏–Ω–∞–º–∏.",
                        "–î—É–∂–µ –∑—Ä—É—á–Ω–∞ —Ç–∞ –ª–µ–≥–∫–∞, —ñ–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –ø–æ—ó–∑–¥–æ–∫."
                    ]
                },
                {
                    "id": 5,
                    "title": "–§–æ—Ç–æ—Ä–∞–º–∫–∞ DigitalArt",
                    "category": "–ï–ª–µ–∫—Ç—Ä–æ–Ω—ñ–∫–∞",
                    "price": 1500,
                    "image": "https://placehold.co/400x200/00BCD4/FFFFFF?text=Digital+Frame",
                    "tags": ["display", "home"],
                    "description": "–¶–∏—Ñ—Ä–æ–≤–∞ —Ñ–æ—Ç–æ—Ä–∞–º–∫–∞ DigitalArt –¥–æ–∑–≤–æ–ª–∏—Ç—å –≤–∞–º –Ω–∞—Å–æ–ª–æ–¥–∂—É–≤–∞—Ç–∏—Å—è —É–ª—é–±–ª–µ–Ω–∏–º–∏ —Å–ø–æ–≥–∞–¥–∞–º–∏. –í–∏—Å–æ–∫–∞ —Ä–æ–∑–¥—ñ–ª—å–Ω–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –µ–∫—Ä–∞–Ω—É —Ç–∞ –ø—Ä–æ—Å—Ç–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ä–æ–±–ª—è—Ç—å —ó—ó —ñ–¥–µ–∞–ª—å–Ω–æ—é –¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è–º –¥–æ –±—É–¥—å-—è–∫–æ–≥–æ —ñ–Ω—Ç–µ—Ä'—î—Ä—É. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å–ª–∞–π–¥-—à–æ—É —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ä—ñ–∑–Ω–∏—Ö —Ñ–æ—Ä–º–∞—Ç—ñ–≤.",
                    "techSpecs": {
                        "–î–∏—Å–ø–ª–µ–π": "10.1 –¥—é–π–º–∞ IPS",
                        "–†–æ–∑–¥—ñ–ª—å–Ω–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å": "1280x800",
                        "–ü–∞–º'—è—Ç—å": "16GB",
                        "–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è": "Wi-Fi, USB"
                    },
                    "reviews": [
                        "–ß—É–¥–æ–≤–∏–π –ø–æ–¥–∞—Ä—É–Ω–æ–∫, —è–∫—ñ—Å—Ç—å –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤—Ä–∞–∂–∞—î.",
                        "–õ–µ–≥–∫–æ –Ω–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ—ñ—ó –≤–∏–≥–ª—è–¥–∞—é—Ç—å —á—É–¥–æ–≤–æ."
                    ]
                },
                {
                    "id": 6,
                    "title": "–ú–µ—Ö–∞–Ω—ñ—á–Ω–∏–π –≥–æ–¥–∏–Ω–Ω–∏–∫ Elegance",
                    "category": "–ì–æ–¥–∏–Ω–Ω–∏–∫–∏",
                    "price": 8900,
                    "image": "https://placehold.co/400x200/795548/FFFFFF?text=Classic+Watch",
                    "tags": ["classic", "analog"],
                    "description": "–ú–µ—Ö–∞–Ω—ñ—á–Ω–∏–π –≥–æ–¥–∏–Ω–Ω–∏–∫ Elegance - —Ü–µ –≤—Ç—ñ–ª–µ–Ω–Ω—è –∫–ª–∞—Å–∏—á–Ω–æ–≥–æ —Å—Ç–∏–ª—é —Ç–∞ –º–∞–π—Å—Ç–µ—Ä–Ω–æ—Å—Ç—ñ. –í–∏—à—É–∫–∞–Ω–∏–π –¥–∏–∑–∞–π–Ω, —Ç–æ—á–Ω–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º —Ç–∞ –≤–∏—Å–æ–∫–æ—è–∫—ñ—Å–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ —Ä–æ–±–ª—è—Ç—å –π–æ–≥–æ —ñ–¥–µ–∞–ª—å–Ω–∏–º –∞–∫—Å–µ—Å—É–∞—Ä–æ–º –¥–ª—è —Å–ø—Ä–∞–≤–∂–Ω—ñ—Ö –ø–æ—Ü—ñ–Ω–æ–≤—É–≤–∞—á—ñ–≤. –í–æ–¥–æ–Ω–µ–ø—Ä–æ–Ω–∏–∫–Ω–∏–π –∫–æ—Ä–ø—É—Å —Ç–∞ —Å–∞–ø—Ñ—ñ—Ä–æ–≤–µ —Å–∫–ª–æ.",
                    "techSpecs": {
                        "–ú–µ—Ö–∞–Ω—ñ–∑–º": "–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π, —à–≤–µ–π—Ü–∞—Ä—Å—å–∫–∏–π",
                        "–ú–∞—Ç–µ—Ä—ñ–∞–ª –∫–æ—Ä–ø—É—Å—É": "–ù–µ—Ä–∂–∞–≤—ñ—é—á–∞ —Å—Ç–∞–ª—å",
                        "–°–∫–ª–æ": "–°–∞–ø—Ñ—ñ—Ä–æ–≤–µ",
                        "–í–æ–¥–æ–Ω–µ–ø—Ä–æ–Ω–∏–∫–Ω—ñ—Å—Ç—å": "100 –º–µ—Ç—Ä—ñ–≤"
                    },
                    "reviews": [
                        "–í–∏–≥–ª—è–¥–∞—î –¥—É–∂–µ –¥–æ—Ä–æ–≥–æ, —è–∫—ñ—Å—Ç—å –Ω–∞ –≤–∏—Å–æ—Ç—ñ.",
                        "–ö–ª–∞—Å–∏–∫–∞, —è–∫–∞ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –≤–∏–π–¥–µ –∑ –º–æ–¥–∏."
                    ]
                },
                {
                    "id": 7,
                    "title": "–ë–µ–∑–¥—Ä–æ—Ç–æ–≤–∞ –º–∏—à–∞ HyperSpeed",
                    "category": "–ö–æ–º–ø'—é—Ç–µ—Ä–Ω—ñ –∞–∫—Å–µ—Å—É–∞—Ä–∏",
                    "price": 1800,
                    "image": "https://placehold.co/400x200/FFC107/333333?text=Gaming+Mouse",
                    "tags": ["gaming", "ergonomic"],
                    "description": "–ë–µ–∑–¥—Ä–æ—Ç–æ–≤–∞ –º–∏—à–∞ HyperSpeed —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∞ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó —Ç–æ—á–Ω–æ—Å—Ç—ñ —Ç–∞ —à–≤–∏–¥–∫–æ—Å—Ç—ñ –≤ —ñ–≥—Ä–∞—Ö. –ï—Ä–≥–æ–Ω–æ–º—ñ—á–Ω–∏–π –¥–∏–∑–∞–π–Ω –∑–∞–±–µ–∑–ø–µ—á—É—î –∫–æ–º—Ñ–æ—Ä—Ç –Ω–∞–≤—ñ—Ç—å –ø—ñ–¥ —á–∞—Å —Ç—Ä–∏–≤–∞–ª–∏—Ö —Å–µ—Å—ñ–π. –ù–∞–ª–∞—à—Ç–æ–≤—É–≤–∞–Ω—ñ –∫–Ω–æ–ø–∫–∏ —Ç–∞ —Å–µ–Ω—Å–æ—Ä –≤–∏—Å–æ–∫–æ—ó —Ä–æ–∑–¥—ñ–ª—å–Ω–æ—ó –∑–¥–∞—Ç–Ω–æ—Å—Ç—ñ.",
                    "techSpecs": {
                        "–°–µ–Ω—Å–æ—Ä": "–û–ø—Ç–∏—á–Ω–∏–π, 16000 DPI",
                        "–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è": "–ë–µ–∑–¥—Ä–æ—Ç–æ–≤–µ 2.4 –ì–ì—Ü",
                        "–ö–Ω–æ–ø–∫–∏": "8 –ø—Ä–æ–≥—Ä–∞–º–æ–≤–∞–Ω–∏—Ö",
                        "–ë–∞—Ç–∞—Ä–µ—è": "–î–æ 50 –≥–æ–¥–∏–Ω"
                    },
                    "reviews": [
                        "–Ü–¥–µ–∞–ª—å–Ω–∞ –º–∏—à–∞ –¥–ª—è –≥–µ–π–º—ñ–Ω–≥—É, –¥—É–∂–µ —Ç–æ—á–Ω–∞.",
                        "–ó—Ä—É—á–Ω–æ –ª–µ–∂–∏—Ç—å –≤ —Ä—É—Ü—ñ, –¥–æ–≤–≥–æ —Ç—Ä–∏–º–∞—î –∑–∞—Ä—è–¥."
                    ]
                },
                {
                    "id": 8,
                    "title": "–í–µ–±–∫–∞–º–µ—Ä–∞ UltraHD Streamer",
                    "category": "–ö–æ–º–ø'—é—Ç–µ—Ä–Ω—ñ –∞–∫—Å–µ—Å—É–∞—Ä–∏",
                    "price": 4500,
                    "image": "https://placehold.co/400x200/607D8B/FFFFFF?text=Webcam+4K",
                    "tags": ["streaming", "4k"],
                    "description": "–í–µ–±–∫–∞–º–µ—Ä–∞ UltraHD Streamer –∑–∞–±–µ–∑–ø–µ—á—É—î –Ω–∞–¥–∑–≤–∏—á–∞–π–Ω–æ —á—ñ—Ç–∫–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è —É 4K, —ñ–¥–µ–∞–ª—å–Ω–æ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è —Å—Ç—Ä—ñ–º—ñ–Ω–≥—É —Ç–∞ –≤—ñ–¥–µ–æ–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ–π. –í–±—É–¥–æ–≤–∞–Ω–∏–π –º—ñ–∫—Ä–æ—Ñ–æ–Ω –∑ —à—É–º–æ–∑–∞–≥–ª—É—à–µ–Ω–Ω—è–º —Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ñ–æ–∫—É—Å—É–≤–∞–Ω–Ω—è. –õ–µ–≥–∫–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è Plug-and-Play.",
                    "techSpecs": {
                        "–†–æ–∑–¥—ñ–ª—å–Ω–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å": "4K Ultra HD",
                        "–ß–∞—Å—Ç–æ—Ç–∞ –∫–∞–¥—Ä—ñ–≤": "30fps (4K), 60fps (1080p)",
                        "–ú—ñ–∫—Ä–æ—Ñ–æ–Ω": "–í–±—É–¥–æ–≤–∞–Ω–∏–π, —à—É–º–æ–∑–∞–≥–ª—É—à–µ–Ω–Ω—è",
                        "–§–æ–∫—É—Å": "–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π"
                    },
                    "reviews": [
                        "–Ø–∫—ñ—Å—Ç—å –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤—Ä–∞–∂–∞—î, –¥–ª—è —Å—Ç—Ä—ñ–º—ñ–Ω–≥—É —Ç–µ, —â–æ —Ç—Ä–µ–±–∞.",
                        "–õ–µ–≥–∫–∞ –≤ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—ñ, –ø—Ä–∞—Ü—é—î –±–µ–∑ –Ω–∞—Ä—ñ–∫–∞–Ω—å."
                    ]
                }
            ];

            /**
             * ProductCardRenderer class
             * Responsible for generating HTML markup for a single product card.
             */
            class ProductCardRenderer {
                /**
                 * Generates the HTML string for a product card.
                 * @param {Object} product - The product object.
                 * @param {boolean} isInCart - True if the product is currently in the cart.
                 * @returns {string} HTML string for the product card.
                 */
                static render(product, isInCart) {
                    const priceFormatter = new Intl.NumberFormat('uk-UA', {
                        style: 'currency',
                        currency: 'UAH',
                        minimumFractionDigits: 0,
                        maximumFractionDigits: 0
                    });

                    const buttonClass = isInCart ? 'add-to-cart-button added' : 'add-to-cart-button';
                    const buttonText = isInCart ? '–£ –∫–æ—à–∏–∫—É' : '–î–æ–¥–∞—Ç–∏ –≤ –∫–æ—à–∏–∫';
                    const buttonDisabled = isInCart ? 'disabled' : '';

                    return `
                        <div class="product-card" data-id="${product.id}">
                            <img src="${product.image}" alt="${product.title}" onerror="this.onerror=null;this.src='https://placehold.co/400x200/cccccc/333333?text=–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è+–≤—ñ–¥—Å—É—Ç–Ω—î';">
                            <div class="product-card-content">
                                <h3>${product.title}</h3>
                                <p>–ö–∞—Ç–µ–≥–æ—Ä—ñ—è: ${product.category}</p>
                                <p class="tags">–¢–µ–≥–∏: ${product.tags.join(', ')}</p>
                                <div class="price">${priceFormatter.format(product.price)}</div>
                                <button class="${buttonClass}" data-product-id="${product.id}" ${buttonDisabled}>${buttonText}</button>
                            </div>
                        </div>
                    `;
                }
            }

            /**
             * Catalog class
             * Manages rendering the entire list of products into a DOM container.
             */
            class Catalog {
                /**
                 * @param {HTMLElement} containerElement - The DOM element to render products into.
                 * @param {HTMLElement} noResultsMessageElement - The DOM element for the no results message.
                 */
                constructor(containerElement, noResultsMessageElement) {
                    this.container = containerElement;
                    this.noResultsMessage = noResultsMessageElement;
                }

                /**
                 * Renders a list of products into the catalog container.
                 * @param {Array<Object>} products - An array of product objects.
                 * @param {Set<number>} productsInCartIds - A set of product IDs currently in the cart.
                 */
                renderProducts(products, productsInCartIds) {
                    this.container.innerHTML = ''; // Clear existing products
                    if (products.length === 0) {
                        this.noResultsMessage.style.display = 'block';
                    } else {
                        this.noResultsMessage.style.display = 'none';
                        products.forEach(product => {
                            const isInCart = productsInCartIds.has(product.id);
                            this.container.insertAdjacentHTML('beforeend', ProductCardRenderer.render(product, isInCart));
                        });
                    }
                }

                /**
                 * Updates the state of "Add to cart" buttons for currently displayed products.
                 * @param {Set<number>} productsInCartIds - A set of product IDs currently in the cart.
                 */
                updateProductCardButtons(productsInCartIds) {
                    this.container.querySelectorAll('.product-card').forEach(cardElement => {
                        const productId = parseInt(cardElement.dataset.id);
                        const button = cardElement.querySelector('.add-to-cart-button');
                        if (button) {
                            const isInCart = productsInCartIds.has(productId);
                            if (isInCart) {
                                button.classList.add('added');
                                button.disabled = true;
                                button.textContent = '–£ –∫–æ—à–∏–∫—É';
                            } else {
                                button.classList.remove('added');
                                button.disabled = false;
                                button.textContent = '–î–æ–¥–∞—Ç–∏ –≤ –∫–æ—à–∏–∫';
                            }
                        }
                    });
                }
            }

            /**
             * Filter class
             * Manages the UI for category filtering.
             */
            class Filter {
                /**
                 * @param {HTMLElement} containerElement - The DOM element containing category checkboxes.
                 * @param {Array<Object>} allProducts - The initial array of all products to extract categories.
                 */
                constructor(containerElement, allProducts) {
                    this.container = containerElement;
                    this.allProducts = allProducts;
                    this.categories = this._extractUniqueCategories();
                    this.onFilterChangeCallback = null;
                    this._renderCategoryCheckboxes();
                    this._addEventListeners();
                }

                /**
                 * Extracts unique categories from the product data.
                 * @returns {Array<string>} An array of unique category names.
                 */
                _extractUniqueCategories() {
                    const categories = new Set();
                    this.allProducts.forEach(product => categories.add(product.category));
                    return Array.from(categories);
                }

                /**
                 * Renders category checkboxes dynamically.
                 */
                _renderCategoryCheckboxes() {
                    this.container.innerHTML = '';
                    this.categories.forEach(category => {
                        const checkboxId = `category-${category.replace(/\s+/g, '-').toLowerCase()}`;
                        this.container.insertAdjacentHTML('beforeend', `
                            <label for="${checkboxId}">
                                <input type="checkbox" id="${checkboxId}" value="${category}" checked>
                                <span>${category}</span>
                            </label>
                        `);
                    });
                }

                /**
                 * Adds event listeners for filter changes.
                 */
                _addEventListeners() {
                    this.container.addEventListener('change', () => {
                        if (this.onFilterChangeCallback) {
                            this.onFilterChangeCallback();
                        }
                    });
                }

                /**
                 * Gets the currently selected categories.
                 * @returns {Array<string>} An array of selected category names.
                 */
                getSelectedCategories() {
                    const checkboxes = this.container.querySelectorAll('input[type="checkbox"]:checked');
                    return Array.from(checkboxes).map(cb => cb.value);
                }

                /**
                 * Registers a callback function to be called when filters change.
                 * @param {Function} callback - The callback function.
                 */
                onFilterChange(callback) {
                    this.onFilterChangeCallback = callback;
                }

                /**
                 * Resets all category filters to checked.
                 */
                reset() {
                    this.container.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                        cb.checked = true;
                    });
                    if (this.onFilterChangeCallback) {
                        this.onFilterChangeCallback();
                    }
                }
            }

            /**
             * Sort class
             * Manages the UI for product sorting.
             */
            class Sort {
                /**
                 * @param {HTMLElement} selectElement - The HTML select element for sorting.
                 */
                constructor(selectElement) {
                    this.select = selectElement;
                    this.onSortChangeCallback = null;
                    this._addEventListeners();
                }

                /**
                 * Adds event listeners for sort changes.
                 */
                _addEventListeners() {
                    this.select.addEventListener('change', () => {
                        if (this.onSortChangeCallback) {
                            this.onSortChangeCallback();
                        }
                    });
                }

                /**
                 * Gets the current sort order.
                 * @returns {string} The value of the selected option (e.g., 'price-asc', 'title-desc').
                 */
                getSortOrder() {
                    return this.select.value;
                }

                /**
                 * Registers a callback function to be called when sort order changes.
                 * @param {Function} callback - The callback function.
                 */
                onSortChange(callback) {
                    this.onSortChangeCallback = callback;
                }

                /**
                 * Resets the sort order to default.
                 */
                reset() {
                    this.select.value = 'default';
                    if (this.onSortChangeCallback) {
                        this.onSortChangeCallback();
                    }
                }
            }

            /**
             * Search class
             * Manages the UI for product search with debounce.
             */
            class Search {
                /**
                 * @param {HTMLElement} inputElement - The HTML input element for search.
                 * @param {number} debounceDelay - The delay in milliseconds for debouncing.
                 */
                constructor(inputElement, debounceDelay = 300) {
                    this.input = inputElement;
                    this.debounceDelay = debounceDelay;
                    this.onSearchChangeCallback = null;
                    this.debounceTimeout = null;
                    this._addEventListeners();
                }

                /**
                 * Adds event listeners for search input with debounce.
                 */
                _addEventListeners() {
                    this.input.addEventListener('input', () => {
                        clearTimeout(this.debounceTimeout);
                        this.debounceTimeout = setTimeout(() => {
                            if (this.onSearchChangeCallback) {
                                this.onSearchChangeCallback();
                            }
                        }, this.debounceDelay);
                    });
                }

                /**
                 * Gets the current search query.
                 * @returns {string} The trimmed search query in lowercase.
                 */
                getSearchQuery() {
                    return this.input.value.trim().toLowerCase();
                }

                /**
                 * Registers a callback function to be called when search query changes (debounced).
                 * @param {Function} callback - The callback function.
                 */
                onSearchChange(callback) {
                    this.onSearchChangeCallback = callback;
                }

                /**
                 * Resets the search input field.
                 */
                reset() {
                    this.input.value = '';
                    clearTimeout(this.debounceTimeout); // Clear any pending debounce
                    if (this.onSearchChangeCallback) {
                        this.onSearchChangeCallback();
                    }
                }
            }

            /**
             * Cart class
             * Manages cart logic, including adding/removing items, total calculation, and localStorage persistence.
             */
            class Cart {
                constructor() {
                    this.items = this._loadCart();
                    this.priceFormatter = new Intl.NumberFormat('uk-UA', {
                        style: 'currency',
                        currency: 'UAH',
                        minimumFractionDigits: 0,
                        maximumFractionDigits: 0
                    });
                    this.onCartChangeCallback = null;
                }

                /**
                 * Loads cart items from localStorage.
                 * @returns {Array<Object>} An array of cart items.
                 */
                _loadCart() {
                    try {
                        const cart = localStorage.getItem('ecom_cart');
                        return cart ? JSON.parse(cart) : [];
                    } catch (e) {
                        console.error("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ—à–∏–∫–∞ –∑ localStorage:", e);
                        return [];
                    }
                }

                /**
                 * Saves cart items to localStorage.
                 */
                _saveCart() {
                    try {
                        localStorage.setItem('ecom_cart', JSON.stringify(this.items));
                        if (this.onCartChangeCallback) {
                            this.onCartChangeCallback();
                        }
                    } catch (e) {
                        console.error("–ü–æ–º–∏–ª–∫–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ—à–∏–∫–∞ –≤ localStorage:", e);
                    }
                }

                /**
                 * Adds a product to the cart.
                 * @param {Object} product - The product object to add.
                 */
                addItem(product) {
                    const existingItem = this.items.find(item => item.id === product.id);
                    if (existingItem) {
                        existingItem.quantity++;
                    } else {
                        this.items.push({ ...product,
                            quantity: 1
                        });
                    }
                    this._saveCart();
                }

                /**
                 * Removes an item from the cart by product ID. If quantity drops to 0, removes the item entirely.
                 * @param {number} productId - The ID of the product to remove.
                 */
                removeItem(productId) {
                    const itemIndex = this.items.findIndex(item => item.id === productId);
                    if (itemIndex > -1) {
                        if (this.items[itemIndex].quantity > 1) {
                            this.items[itemIndex].quantity--;
                        } else {
                            this.items.splice(itemIndex, 1);
                        }
                        this._saveCart();
                    }
                }

                /**
                 * Clears all items from the cart.
                 */
                clear() {
                    this.items = [];
                    this._saveCart();
                }

                /**
                 * Gets the total number of items (sum of quantities) in the cart.
                 * @returns {number} Total item count.
                 */
                getTotalItemsCount() {
                    return this.items.reduce((total, item) => total + item.quantity, 0);
                }

                /**
                 * Gets the total price of all items in the cart.
                 * @returns {string} Formatted total price.
                 */
                getTotalPrice() {
                    const total = this.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                    return this.priceFormatter.format(total);
                }

                /**
                 * Gets all items currently in the cart.
                 * @returns {Array<Object>} An array of cart items.
                 */
                getItems() {
                    return [...this.items]; // Return a copy to prevent direct modification
                }

                /**
                 * Returns a Set of product IDs currently in the cart for quick lookup.
                 * @returns {Set<number>} A set of product IDs in the cart.
                 */
                getProductsInCartIds() {
                    return new Set(this.items.map(item => item.id));
                }

                /**
                 * Registers a callback function to be called when the cart changes.
                 * @param {Function} callback - The callback function.
                 */
                onCartChange(callback) {
                    this.onCartChangeCallback = callback;
                }
            }

            /**
             * UIController class
             * Acts as the central orchestrator, coordinating interactions between all classes.
             */
            class UIController {
                /**
                 * @param {Array<Object>} initialProducts - The original, unfiltered product data.
                 */
                constructor(initialProducts) {
                    this.allProducts = initialProducts;
                    this.catalog = new Catalog(
                        document.getElementById('product-list'),
                        document.getElementById('no-results-message')
                    );
                    this.filter = new Filter(
                        document.getElementById('category-filters'),
                        this.allProducts
                    );
                    this.sort = new Sort(document.getElementById('sort-select'));
                    this.search = new Search(document.getElementById('search-input'));
                    this.cart = new Cart();

                    this.cartModal = document.getElementById('cart-modal');
                    this.cartItemsList = document.getElementById('cart-items-list');
                    this.cartTotalPrice = document.getElementById('cart-total-price');
                    this.cartItemCount = document.getElementById('cart-item-count');
                    this.messageBox = document.getElementById('message-box');

                    this.productDetailsModal = document.getElementById('product-details-modal');
                    this.closeProductDetailsModalButton = document.getElementById('close-product-details-modal');
                    this.detailsProductImage = document.getElementById('details-product-image');
                    this.detailsProductTitle = document.getElementById('details-product-title');
                    this.detailsProductPrice = document.getElementById('details-product-price');
                    this.detailsProductCategory = document.getElementById('details-product-category');
                    this.detailsProductTags = document.getElementById('details-product-tags');
                    this.detailsProductDescription = document.getElementById('details-product-description');
                    this.detailsProductTechSpecs = document.getElementById('details-product-tech-specs');
                    this.detailsProductReviews = document.getElementById('details-product-reviews');
                    this.detailsAddToCartButton = document.getElementById('details-add-to-cart-button');
                    this.detailsEditProductButton = document.getElementById('details-edit-product-button');


                    this.editProductModal = document.getElementById('edit-product-modal');
                    this.closeEditProductModalButton = document.getElementById('close-edit-product-modal');
                    this.editProductForm = document.getElementById('edit-product-form');
                    this.editProductIdInput = document.getElementById('edit-product-id');
                    this.editProductTitleInput = document.getElementById('edit-product-title');
                    this.editProductCategoryInput = document.getElementById('edit-product-category');
                    this.editProductPriceInput = document.getElementById('edit-product-price');
                    this.editProductImageInput = document.getElementById('edit-product-image');
                    this.editProductTagsInput = document.getElementById('edit-product-tags');
                    this.editProductDescriptionInput = document.getElementById('edit-product-description');
                    this.editProductTechSpecsInput = document.getElementById('edit-product-tech-specs');
                    this.editProductReviewsInput = document.getElementById('edit-product-reviews');


                    this.loadingIndicator = document.getElementById('loading-indicator');


                    this._setupEventListeners();
                    this.updateCartUI(); // Initial cart UI update
                }

                /**
                 * Sets up all necessary event listeners for UI interactions.
                 */
                _setupEventListeners() {
                    // Filter, Sort, Search change events
                    this.filter.onFilterChange(() => this.updateCatalog());
                    this.sort.onSortChange(() => this.updateCatalog());
                    this.search.onSearchChange(() => this.updateCatalog());

                    // Delegated event listener for product card clicks (for details)
                    document.getElementById('product-list').addEventListener('click', (event) => {
                        const productCard = event.target.closest('.product-card');
                        if (productCard) {
                            const productId = parseInt(productCard.dataset.id);
                            // Only open details if not clicking the "Add to Cart" button directly
                            if (!event.target.classList.contains('add-to-cart-button')) {
                                this.openProductDetailsModal(productId);
                            }
                        }
                    });

                    // Add to Cart button on product cards (delegated event listener)
                    document.getElementById('product-list').addEventListener('click', (event) => {
                        if (event.target.classList.contains('add-to-cart-button')) {
                            const productId = parseInt(event.target.dataset.productId);
                            const productToAdd = this.allProducts.find(p => p.id === productId);
                            if (productToAdd) {
                                this.cart.addItem(productToAdd);
                                this.showMessage(`"${productToAdd.title}" –¥–æ–¥–∞–Ω–æ –¥–æ –∫–æ—à–∏–∫–∞!`);
                            }
                        }
                    });

                    // Cart button and modal
                    document.getElementById('open-cart-button').addEventListener('click', () => this.openCartModal());
                    document.getElementById('close-cart-button').addEventListener('click', () => this.closeCartModal());
                    this.cartModal.addEventListener('click', (event) => {
                        if (event.target === this.cartModal) {
                            this.closeCartModal();
                        }
                    });

                    // Product Details Modal close and buttons
                    this.closeProductDetailsModalButton.addEventListener('click', () => this.closeProductDetailsModal());
                    this.productDetailsModal.addEventListener('click', (event) => {
                        if (event.target === this.productDetailsModal) {
                            this.closeProductDetailsModal();
                        }
                    });
                    this.detailsAddToCartButton.addEventListener('click', (event) => {
                        const productId = parseInt(event.target.dataset.productId);
                        const productToAdd = this.allProducts.find(p => p.id === productId);
                        if (productToAdd) {
                            this.cart.addItem(productToAdd);
                            this.showMessage(`"${productToAdd.title}" –¥–æ–¥–∞–Ω–æ –¥–æ –∫–æ—à–∏–∫–∞!`);
                            this.closeProductDetailsModal(); // Close details after adding to cart
                        }
                    });
                    this.detailsEditProductButton.addEventListener('click', (event) => {
                        const productId = parseInt(event.target.dataset.productId);
                        this.closeProductDetailsModal(); // Close details before opening edit
                        this.openEditProductModal(productId);
                    });


                    // Close Edit Product Modal
                    this.closeEditProductModalButton.addEventListener('click', () => this.closeEditProductModal());
                    this.editProductModal.addEventListener('click', (event) => {
                        if (event.target === this.editProductModal) {
                            this.closeEditProductModal();
                        }
                    });

                    // Save Product Changes
                    this.editProductForm.addEventListener('submit', (event) => {
                        event.preventDefault(); // Prevent default form submission
                        this.saveProductChanges();
                    });


                    // Remove from cart button (delegated)
                    this.cartItemsList.addEventListener('click', (event) => {
                        if (event.target.classList.contains('remove-item-button')) {
                            const productId = parseInt(event.target.dataset.productId);
                            this.cart.removeItem(productId);
                            this.showMessage('–¢–æ–≤–∞—Ä –≤–∏–¥–∞–ª–µ–Ω–æ –∑ –∫–æ—à–∏–∫–∞.');
                        }
                    });

                    // Checkout button
                    document.getElementById('checkout-button').addEventListener('click', () => this.checkout());

                    // Reset filters button
                    document.getElementById('reset-filters-button').addEventListener('click', () => this.resetAll());

                    // Cart change listener
                    this.cart.onCartChange(() => this.updateCartUI());
                }

                /**
                 * Applies filters, search, and sorting to the product data and re-renders the catalog.
                 */
                updateCatalog() {
                    let filteredProducts = [...this.allProducts];

                    // 1. Apply category filters
                    const selectedCategories = this.filter.getSelectedCategories();
                    // Only filter if not all categories are selected
                    if (selectedCategories.length > 0 && selectedCategories.length < this.filter.categories.length) {
                        filteredProducts = filteredProducts.filter(product =>
                            selectedCategories.includes(product.category)
                        );
                    }

                    // 2. Apply search query
                    const searchQuery = this.search.getSearchQuery();
                    if (searchQuery) {
                        filteredProducts = filteredProducts.filter(product =>
                            product.title.toLowerCase().includes(searchQuery) ||
                            product.category.toLowerCase().includes(searchQuery) ||
                            product.tags.some(tag => tag.toLowerCase().includes(searchQuery)) ||
                            product.description.toLowerCase().includes(searchQuery)
                        );
                    }

                    // 3. Apply sorting
                    const sortOrder = this.sort.getSortOrder();
                    switch (sortOrder) {
                        case 'price-asc':
                            filteredProducts.sort((a, b) => a.price - b.price);
                            break;
                        case 'price-desc':
                            filteredProducts.sort((a, b) => b.price - a.price);
                            break;
                        case 'title-asc':
                            filteredProducts.sort((a, b) => a.title.localeCompare(b.title));
                            break;
                        case 'title-desc':
                            filteredProducts.sort((a, b) => b.title.localeCompare(a.title));
                            break;
                        case 'default':
                        default:
                            // No specific sorting, maintain original or default order
                            break;
                    }

                    const productsInCartIds = this.cart.getProductsInCartIds();
                    this.catalog.renderProducts(filteredProducts, productsInCartIds);
                    this.catalog.updateProductCardButtons(productsInCartIds);
                }

                /**
                 * Updates the cart UI, including item count and modal content, and product card button states.
                 */
                updateCartUI() {
                    this.cartItemCount.textContent = this.cart.getTotalItemsCount();
                    this.cartTotalPrice.textContent = this.cart.getTotalPrice();

                    this.cartItemsList.innerHTML = '';
                    const items = this.cart.getItems();
                    if (items.length === 0) {
                        this.cartItemsList.innerHTML = '<li style="text-align: center; color: #888; padding: 20px;">–ö–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π.</li>';
                    } else {
                        items.forEach(item => {
                            const formattedPrice = this.cart.priceFormatter.format(item.price * item.quantity);
                            this.cartItemsList.insertAdjacentHTML('beforeend', `
                                <li class="cart-item">
                                    <div class="cart-item-info">
                                        <h4>${item.title}</h4>
                                        <p>–ö—ñ–ª—å–∫—ñ—Å—Ç—å: ${item.quantity} | –¶—ñ–Ω–∞: ${this.cart.priceFormatter.format(item.price)} –∑–∞ —à—Ç.</p>
                                    </div>
                                    <span>${formattedPrice}</span>
                                    <button class="remove-item-button" data-product-id="${item.id}">–í–∏–¥–∞–ª–∏—Ç–∏</button>
                                </li>
                            `);
                        });
                    }
                    // Update the state of "Add to cart" buttons on the product cards
                    this.catalog.updateProductCardButtons(this.cart.getProductsInCartIds());
                }

                /**
                 * Opens the cart modal.
                 */
                openCartModal() {
                    this.updateCartUI(); // Ensure cart UI is fresh before opening
                    this.cartModal.classList.add('show');
                }

                /**
                 * Closes the cart modal.
                 */
                closeCartModal() {
                    this.cartModal.classList.remove('show');
                }

                /**
                 * Handles the checkout process.
                 */
                checkout() {
                    if (this.cart.getTotalItemsCount() === 0) {
                        this.showMessage('–í–∞—à –∫–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π. –î–æ–¥–∞–π—Ç–µ —Ç–æ–≤–∞—Ä–∏ –ø–µ—Ä–µ–¥ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è–º –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.');
                        return;
                    }
                    this.cart.clear();
                    // updateCartUI() is called via cart.onCartChange callback
                    this.closeCartModal();
                    this.showMessage('–í–∞—à–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–æ! –î—è–∫—É—î–º–æ –∑–∞ –ø–æ–∫—É–ø–∫—É.');
                }

                /**
                 * Resets all filters, search, and sorting to their default states.
                 */
                resetAll() {
                    this.filter.reset();
                    this.sort.reset();
                    this.search.reset();
                    this.updateCatalog(); // Re-render catalog after reset
                    this.showMessage('–§—ñ–ª—å—Ç—Ä–∏, –ø–æ—à—É–∫ —Ç–∞ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è —Å–∫–∏–Ω—É—Ç–æ.');
                }

                /**
                 * Displays a temporary message to the user.
                 * @param {string} message - The message to display.
                 * @param {number} duration - Duration in milliseconds (default: 3000).
                 */
                showMessage(message, duration = 3000) {
                    this.messageBox.textContent = message;
                    this.messageBox.classList.add('show');
                    setTimeout(() => {
                        this.messageBox.classList.remove('show');
                    }, duration);
                }

                /**
                 * Opens the product details modal.
                 * @param {number} productId - The ID of the product to display.
                 */
                openProductDetailsModal(productId) {
                    const product = this.allProducts.find(p => p.id === productId);
                    if (!product) {
                        this.showMessage('–ü–æ–º–∏–ª–∫–∞: —Ç–æ–≤–∞—Ä –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.');
                        return;
                    }

                    // Populate details modal
                    this.detailsProductImage.src = product.image;
                    this.detailsProductImage.alt = product.title;
                    this.detailsProductTitle.textContent = product.title;
                    this.detailsProductPrice.textContent = this.cart.priceFormatter.format(product.price);
                    this.detailsProductCategory.textContent = product.category;
                    this.detailsProductTags.textContent = product.tags.join(', ');
                    this.detailsProductDescription.textContent = product.description;

                    // Populate tech specs
                    this.detailsProductTechSpecs.innerHTML = '';
                    if (product.techSpecs) {
                        for (const [key, value] of Object.entries(product.techSpecs)) {
                            const li = document.createElement('li');
                            li.textContent = `${key}: ${value}`;
                            this.detailsProductTechSpecs.appendChild(li);
                        }
                    } else {
                        const li = document.createElement('li');
                        li.textContent = '–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –ø—Ä–æ —Ç–µ—Ö–Ω—ñ—á–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏.';
                        this.detailsProductTechSpecs.appendChild(li);
                    }

                    // Populate reviews
                    this.detailsProductReviews.innerHTML = '';
                    if (product.reviews && product.reviews.length > 0) {
                        product.reviews.forEach(review => {
                            const li = document.createElement('li');
                            li.textContent = `"${review}"`;
                            this.detailsProductReviews.appendChild(li);
                        });
                    } else {
                        const li = document.createElement('li');
                        li.textContent = '–í—ñ–¥–≥—É–∫—ñ–≤ –ø–æ–∫–∏ –Ω–µ–º–∞—î.';
                        this.detailsProductReviews.appendChild(li);
                    }

                    // Update Add to Cart button state in details modal
                    const isInCart = this.cart.getProductsInCartIds().has(productId);
                    if (isInCart) {
                        this.detailsAddToCartButton.classList.add('added');
                        this.detailsAddToCartButton.disabled = true;
                        this.detailsAddToCartButton.textContent = '–£ –∫–æ—à–∏–∫—É';
                    } else {
                        this.detailsAddToCartButton.classList.remove('added');
                        this.detailsAddToCartButton.disabled = false;
                        this.detailsAddToCartButton.textContent = '–î–æ–¥–∞—Ç–∏ –≤ –∫–æ—à–∏–∫';
                    }
                    this.detailsAddToCartButton.dataset.productId = productId; // Set product ID for button

                    // Set product ID for edit button
                    this.detailsEditProductButton.dataset.productId = productId;

                    this.productDetailsModal.classList.add('show');
                }

                /**
                 * Closes the product details modal.
                 */
                closeProductDetailsModal() {
                    this.productDetailsModal.classList.remove('show');
                }

                /**
                 * Opens the product editing modal.
                 * @param {number} productId - The ID of the product to edit.
                 */
                openEditProductModal(productId) {
                    const product = this.allProducts.find(p => p.id === productId);
                    if (!product) {
                        this.showMessage('–ü–æ–º–∏–ª–∫–∞: —Ç–æ–≤–∞—Ä –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –¥–ª—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è.');
                        return;
                    }

                    // Populate the form fields
                    this.editProductIdInput.value = product.id;
                    this.editProductTitleInput.value = product.title;
                    this.editProductCategoryInput.value = product.category;
                    this.editProductPriceInput.value = product.price;
                    this.editProductImageInput.value = product.image;
                    this.editProductTagsInput.value = product.tags.join(', ');
                    this.editProductDescriptionInput.value = product.description;
                    
                    // Convert techSpecs object to JSON string for editing
                    this.editProductTechSpecsInput.value = product.techSpecs ? JSON.stringify(product.techSpecs, null, 2) : '';
                    // Convert reviews array to newline-separated string for editing
                    this.editProductReviewsInput.value = product.reviews ? product.reviews.join('\n') : '';

                    this.editProductModal.classList.add('show');
                }

                /**
                 * Closes the product editing modal.
                 */
                closeEditProductModal() {
                    this.editProductModal.classList.remove('show');
                }

                /**
                 * Saves changes from the product editing form.
                 */
                saveProductChanges() {
                    const productId = parseInt(this.editProductIdInput.value);
                    const productIndex = this.allProducts.findIndex(p => p.id === productId);

                    if (productIndex === -1) {
                        this.showMessage('–ü–æ–º–∏–ª–∫–∞: —Ç–æ–≤–∞—Ä –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.');
                        return;
                    }

                    // Update product data
                    this.allProducts[productIndex].title = this.editProductTitleInput.value;
                    this.allProducts[productIndex].category = this.editProductCategoryInput.value;
                    this.allProducts[productIndex].price = parseFloat(this.editProductPriceInput.value);
                    this.allProducts[productIndex].image = this.editProductImageInput.value;
                    this.allProducts[productIndex].tags = this.editProductTagsInput.value.split(',').map(tag => tag.trim()).filter(tag => tag !== '');
                    this.allProducts[productIndex].description = this.editProductDescriptionInput.value;

                    // Parse techSpecs from JSON string
                    try {
                        this.allProducts[productIndex].techSpecs = JSON.parse(this.editProductTechSpecsInput.value || '{}');
                    } catch (e) {
                        this.showMessage('–ü–æ–º–∏–ª–∫–∞ —Ñ–æ—Ä–º–∞—Ç—É —Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ (JSON).');
                        console.error('JSON parse error for tech specs:', e);
                        return; // Prevent saving with bad data
                    }

                    // Parse reviews from newline-separated string
                    this.allProducts[productIndex].reviews = this.editProductReviewsInput.value.split('\n').map(review => review.trim()).filter(review => review !== '');

                    this.closeEditProductModal();
                    this.updateCatalog(); // Re-render catalog with updated product
                    this.showMessage('–ó–º—ñ–Ω–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ!');
                }

                /**
                 * Shows the loading indicator.
                 */
                showLoading() {
                    this.loadingIndicator.classList.add('show');
                }

                /**
                 * Hides the loading indicator.
                 */
                hideLoading() {
                    this.loadingIndicator.classList.remove('show');
                }
            }

            // Initialize the application after the DOM is fully loaded
            document.addEventListener('DOMContentLoaded', () => {
                const uiController = new UIController(productsData);
                uiController.updateCatalog(); // Initial rendering of all products
            });
        })();
    </script>
</body>
</html>
